<!DOCTYPE html>
<html layout:decorate="~{layout}">
  <div layout:fragment="content">
    <header th:replace="~{header :: headerFragment}"></header>
    <main>
      <div class="container-fluid text-center">
        <div class="row">
          <div class="col-md-2"></div>
          <div class="col-md-auto">
            <div class="row justify-content-center">
              <div class="my-3">
                <a
                  href="javascript:void(0);"
                  class="recommend btn btn-sm btn-outline-secondary"
                  th:data-uri="@{|/recipe/vote/${recipe.id}|}"
                >
                  いいね
                  <span
                    class="badge rounded-pill bg-success"
                    th:text="${#lists.size(recipe.voter)}"
                  ></span>
                </a>
                <a
                  th:href="@{|/recipe/modify/${recipe.id}|}"
                  class="btn btn-sm btn-outline-secondary"
                  sec:authorize="isAuthenticated()"
                  th:if="${recipe.author != null and #authentication.getPrincipal().getUsername() == recipe.author.username}"
                  th:text="修正"
                ></a>
                <a
                  href="javascript:void(0);"
                  th:data-uri="@{|/recipe/delete/${recipe.id}|}"
                  class="delete btn btn-sm btn-outline-secondary"
                  sec:authorize="isAuthenticated()"
                  th:if="${recipe.author != null and #authentication.getPrincipal().getUsername() == recipe.author.username}"
                  th:text="削除"
                ></a>
              </div>
              <div class="text-center" id="recipe_title">
                <h1 class="p-2">じゃがバター</h1>
              </div>
              <div class="col-md-6">
                <img
                  th:src="@{/assets/img/zyagabata.webp}"
                  class="img-fluid"
                  alt="Recipe Image"
                  id="recipe_image"
                />
              </div>
            </div>
            <div class="row justify-content-center p-5">
              <div class="col-md-7">
                <hr />
              </div>
            </div>
            <div class="row justify-content-center">
              <div class="col-md-2">
                <label for="" class="p-2">
                  <h3>調理時間</h3>
                </label>
                <h5>30分</h5>
              </div>
              <div class="col-md-2">
                <label for="" class="p-2">
                  <h3>カロリー</h3>
                  <h5>350kcal</h5>
                </label>
              </div>
              <div class="col-md-2">
                <label for="" class="p-2">
                  <h3>カテゴリー</h3>
                  <h5>西洋料理</h5>
                </label>
              </div>
            </div>
            <div class="row justify-content-center p-5">
              <div class="col-md-7">
                <hr />
              </div>
            </div>

            <div
              class="row justify-content-center text-center"
              id="recipe_info"
            >
              <label for="">
                <h1 class="">材料</h1>
              </label>
              <div class="col-md-6 text-center">
                <table class="table">
                  <thead>
                    <tr>
                      <th scope="col"></th>
                      <th scope="col">材料名</th>
                      <th scope="col">数量</th>
                      <th scope="col">計量単位</th>
                      <th scope="col">補足</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <th scope="row">1</th>
                      <td>ジャガイモ</td>
                      <td>1</td>
                      <td>個</td>
                      <td></td>
                    </tr>
                    <tr>
                      <th scope="row">2</th>
                      <td>バター</td>
                      <td>2</td>
                      <td>さじ</td>
                      <td></td>
                    </tr>
                    <tr>
                      <th scope="row">3</th>
                      <td>塩</td>
                      <td>1</td>
                      <td>大さじ</td>
                      <td>味見しながら調整</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <div class="row justify-content-center p-5">
              <div class="col-md-7">
                <hr />
              </div>
            </div>

            <div class="row justify-content-center text-center">
              <div class="col-md-6">
                <label class="" for="">
                  <h1>作り方</h1>
                </label>
                <div class="row text-start p-2">
                  <label for="">1番目</label>
                  <div class="col-md-9 border border-secondary rounded">
                    <pre>ジャガイモを洗う。</pre>
                  </div>
                  <div class="col-md-3">
                    <img
                      class="img-fluid"
                      th:src="@{/assets/img/background.jpg}"
                      alt=""
                    />
                  </div>
                </div>
                <div class="row text-start p-2">
                  <label for="">2番目</label>
                  <div class="col-md-9 border border-secondary rounded">
                    <pre>バターを入れる。</pre>
                  </div>
                  <div class="col-md-3">
                    <img
                      class="img-fluid"
                      th:src="@{/assets/img/background.jpg}"
                      alt=""
                    />
                  </div>
                </div>
                <div class="row text-start p-2">
                  <label for="">3番目</label>
                  <div class="col-md-9 border border-secondary rounded">
                    <pre>塩を降る。</pre>
                  </div>
                  <div class="col-md-3">
                    <img
                      class="img-fluid"
                      th:src="@{/assets/img/background.jpg}"
                      alt=""
                    />
                  </div>
                </div>
              </div>
            </div>
            <div class="row justify-content-center p-5">
              <div class="col-md-7">
                <hr />
              </div>
            </div>

            <div class="row justify-content-center">
              <label class="" for="">
                <h1>YouTube動画</h1>
              </label>
              <div class="col-md-6">
                <iframe
                  class="container-fluid"
                  width="560"
                  height="315"
                  src="https://www.youtube.com/embed/OJN3KIGxnpk"
                  title="YouTube video player"
                  frameborder="0"
                  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                  allowfullscreen
                ></iframe>
              </div>
            </div>
          </div>
          <div class="col-md-2"></div>
        </div>
      </div>
    </main>
    <footer class="bg-light mt-3 p-3 text-center">
      <p>Recipe Management Site &copy; 2023</p>
    </footer>
  </div>
  <script type="text/javascript" th:href="@{js/recipeInfo.js}"></script>

  <script layout:fragment="script" type="text/javascript">
    const delete_elements = document.getElementsByClassName("delete");
    Array.from(delete_elements).forEach(function (element) {
      element.addEventListener("click", function () {
        if (confirm("정말로 삭제하시겠습니까?")) {
          location.href = this.dataset.uri;
        }
      });
    });

    const recommend_elements = document.getElementsByClassName("recommend");
    Array.from(recommend_elements).forEach(function (element) {
      element.addEventListener("click", function () {
        if (confirm("いいねしますか？")) {
          location.href = this.dataset.uri;
        }
      });
    });
  </script>
</html>
